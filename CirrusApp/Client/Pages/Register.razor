@page "/register"
@using System.ComponentModel.DataAnnotations
@using System.Net.Http
@inject HttpClient Http

<h3>Register</h3>

<EditForm Model="@registerModel" OnValidSubmit="@SignUp">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <InputText id="FirstName" placeholder="First Name" @bind-Value="@registerModel.FirstName" />
    <InputText id="LastName" placeholder="Last Name" @bind-Value="@registerModel.LastName" />
    <InputText id="Email" placeholder="E-Mail" @bind-Value="@registerModel.Email" />
    <InputText id="Password" placeholder="Password" @bind-Value="@registerModel.Password" type="password" />
    <button type="submit">Register</button>
</EditForm>

<p>@res</p>

@code {

    public class RegisterModel
    {
        [Required]
        public string Email { get; set; }

        [Required]
        public string FirstName { get; set; }

        [Required]
        public string LastName { get; set; }

        [Required]
        public string Password { get; set; }
    }

    private RegisterModel registerModel = new RegisterModel();
    private string res;

    private async Task SignUp()
    {
        var message = new { Name = registerModel.FirstName };
        var response = await Http.PostAsJsonAsync("http://localhots:7071/api/SignIn", message);
        res = await response.Content.ReadAsStringAsync();
    }
}
